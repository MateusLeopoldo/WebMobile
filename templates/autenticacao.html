<!DOCTYPE html>
<html lang="pt-br">

<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Autenticação</title>
    <link href="{% static 'bootstrap-5.3.8-dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'bootstrap-5.3.8-dist/js/bootstrap.bundle.min.js' %}"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link href="{% static 'css/autenticacao.css' %}" rel="stylesheet">
</head>

<body class="auth-body">
    <div class="auth-container">
        <div class="card auth-card">
            <div class="card-body text-center" >

                <div class="mb-4 text-center">
                    <i class="bi bi-vinyl-fill auth-icon"></i>
                </div>

                <h3 class="card-title mb-3">VinilStore</h3>
                <p class="text-secondary mb-4">Faça login para continuar</p>

                <form action="/" method="post">
                    {% csrf_token %}
                    <div class="mb-3">
                        <input type="text" class="form-control" id="usuario" name="usuario" placeholder="Usuário" required>
                    </div>
                    <div class="mb-3">
                        <input type="password" class="form-control" id="senha" name="senha" placeholder="Senha" required>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Entrar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Erro -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorModalLabel"><i class="bi bi-exclamation-triangle-fill text-danger me-2"></i>Falha no Login</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="modalErrorMessage">
                    <!-- A mensagem de erro será inserida aqui pelo JavaScript -->
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tentar Novamente</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const urlParams = new URLSearchParams(window.location.search);
            const errorMessage = urlParams.get('mensagem');
            if (errorMessage) {
                document.getElementById('modalErrorMessage').textContent = errorMessage;
                const errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
                errorModal.show();
            }
        });
    </script>
</body>

</html>